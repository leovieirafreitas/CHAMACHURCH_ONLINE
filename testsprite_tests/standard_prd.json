{
  "meta": {
    "project": "Chamachurch Online Donation System",
    "date": "2026-01-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Chamachurch Online Donation System is a secure, user-friendly digital platform that enables church members and supporters to make online donations—including tithes, offerings, and mission contributions—across multiple Chamachurch locations in Brazil and Africa. It offers seamless payment integration with Mercado Pago via PIX and credit card, comprehensive donation tracking, automated PDF receipt generation, and an administrative dashboard for church management.",
  "core_goals": [
    "Enable secure, multi-type donations (tithes, offerings, missions) through an intuitive multi-step wizard.",
    "Integrate with Mercado Pago for reliable payment processing via PIX and credit card.",
    "Provide real-time payment status updates to donors.",
    "Generate professional, downloadable PDF receipts with church branding and QR code verification.",
    "Allow donors to search and review their donation history by CPF and location.",
    "Facilitate receipt sharing via WhatsApp.",
    "Provide an admin dashboard with authentication for monitoring donation metrics, filtering, and management.",
    "Ensure data privacy, security, and compliance with Brazilian laws.",
    "Offer a responsive, accessible UI optimized for mobile and desktop use.",
    "Support seamless donor information auto-fill to improve UX for returning donors."
  ],
  "key_features": [
    "Multi-type Donation Form with categories: Tithes, multiple Offerings, and Missions.",
    "Custom donation amount input with real-time currency formatting and validation.",
    "Personal information form collecting name, CPF, email, and phone with validation and auto-fill.",
    "Church location selection from four options.",
    "Dual payment methods: PIX with QR code generation and copy-paste code, and credit card processing with installment options.",
    "Real-time payment status polling and updates from Mercado Pago.",
    "Automated PDF donation receipt creation with detailed info and verification QR code.",
    "Donation history search by CPF and location, with status display and auto-update for pending payments.",
    "Receipt sharing capability via WhatsApp with pre-formatted messages and PDF attachment.",
    "Admin dashboard featuring secure login, donation statistics, filtering, pagination, and cleanup tools."
  ],
  "user_flow_summary": [
    "User initiates donation by selecting donation type and entering amount.",
    "User fills in personal information form, validated with real-time feedback, and auto-filled if donor exists.",
    "User selects the church location for donation.",
    "User selects payment method: PIX or credit card.",
    "For PIX, user receives a QR code and copyable PIX code, with payment status auto-checked until confirmed or timeout.",
    "For credit card, user enters card details securely; payment processes with installments if applicable.",
    "Upon successful payment, user receives a professionally formatted PDF receipt, which can be downloaded or shared via WhatsApp.",
    "Users can search donation history by CPF and church location, view donation statuses, and regenerate receipts.",
    "Admins log in securely to access dashboard with real-time metrics and manage donations via filtering, pagination, and cleanup features."
  ],
  "validation_criteria": [
    "The donation form correctly validates all user inputs including CPF (11 digits and checksum), email, phone number, and amount (minimum and currency format).",
    "PIX payments generate accurate QR codes and copy-paste codes, with payment status updating automatically within specified timeout periods.",
    "Credit card payments tokenize card data securely, support major card brands, and handle installments correctly; payment results are reflected accurately.",
    "PDF receipts contain all required donation and donor information along with church branding and QR code and are downloadable in all supported browsers.",
    "Donation history searches return accurate results filtered by CPF and location, displaying statuses in real time.",
    "Receipt sharing via WhatsApp includes a pre-formatted message and attaches the PDF receipt, functioning on desktop and mobile environments.",
    "Admin login enforces secure session handling and restricts access; dashboard displays accurate statistics and supports filtering and pagination.",
    "System complies with all security and privacy requirements, preventing SQL injection, XSS, and unauthorized admin access.",
    "The user interface is responsive, accessible, and loads within performance targets (page load <3s, API response <2s).",
    "All API endpoints properly handle errors and enforce validation with meaningful messages in Portuguese."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 16.1.4",
      "React 19.2.3",
      "Supabase",
      "Mercado Pago API",
      "jsPDF"
    ],
    "features": [
      {
        "name": "Donation Form",
        "description": "Main donation interface allowing users to select donation type (tithe, offerings, missions), enter amount, personal information (name, CPF, email, phone), select church location, and choose payment method (PIX or Credit Card). Includes form validation and multi-step wizard.",
        "files": [
          "app/page.tsx",
          "app/page.module.css"
        ]
      },
      {
        "name": "Payment Processing - PIX",
        "description": "Integration with Mercado Pago to process PIX payments. Generates QR code and PIX copy-paste code for users to complete payment. Handles payment status checking and updates.",
        "files": [
          "app/api/donate/route.ts",
          "lib/mercadopago.ts",
          "app/page.tsx"
        ]
      },
      {
        "name": "Payment Processing - Credit Card",
        "description": "Integration with Mercado Pago to process credit card payments. Handles card tokenization, installment options, and payment validation.",
        "files": [
          "app/api/donate/route.ts",
          "lib/mercadopago.ts",
          "app/page.tsx"
        ]
      },
      {
        "name": "Donation Receipt Generation",
        "description": "Generates PDF receipts for completed donations using jsPDF. Includes donor information, donation details, church branding, and QR code for verification.",
        "files": [
          "app/page.tsx",
          "app/historico/page.tsx"
        ]
      },
      {
        "name": "Donation History Search",
        "description": "Allows users to search their donation history by CPF and church location. Displays list of donations with status, amount, and date. Includes automatic status checking for pending payments.",
        "files": [
          "app/historico/page.tsx",
          "app/historico/page.module.css"
        ]
      },
      {
        "name": "Receipt Sharing",
        "description": "Enables users to share donation receipts via WhatsApp with pre-formatted message and PDF attachment.",
        "files": [
          "app/historico/page.tsx"
        ]
      },
      {
        "name": "Admin Dashboard",
        "description": "Administrative interface for viewing and managing donations. Displays statistics (total donations, total amount, unique donors, pending payments), donation list with filtering and pagination, and cleanup tools for managing donation statuses.",
        "files": [
          "app/admin/dashboard/page.tsx"
        ]
      },
      {
        "name": "Admin Authentication",
        "description": "Simple authentication system for admin access using Supabase. Includes login page and session management.",
        "files": [
          "app/admin/page.tsx",
          "app/admin/dashboard/page.tsx"
        ]
      },
      {
        "name": "Admin Setup",
        "description": "Initial setup page for creating admin credentials in the system.",
        "files": [
          "app/admin/setup/page.tsx"
        ]
      },
      {
        "name": "Donor Verification",
        "description": "API endpoint to check if a CPF is already registered in the system and retrieve donor information for auto-fill.",
        "files": [
          "app/api/check-donor/route.ts"
        ]
      },
      {
        "name": "Payment Status Checker",
        "description": "API endpoint to check the current status of a payment with Mercado Pago and update the database accordingly.",
        "files": [
          "app/api/check-status/route.ts"
        ]
      },
      {
        "name": "Database Integration",
        "description": "Supabase client configuration for database operations including storing donations, admin credentials, and querying donation history.",
        "files": [
          "lib/supabase.ts"
        ]
      },
      {
        "name": "Mercado Pago Integration",
        "description": "Core payment processing functions for creating payments (PIX and credit card) and retrieving payment status from Mercado Pago API.",
        "files": [
          "lib/mercadopago.ts"
        ]
      },
      {
        "name": "Company Page Router",
        "description": "Dynamic route handler for company-specific donation pages.",
        "files": [
          "app/c/[id]/route.ts"
        ]
      }
    ]
  }
}
